<prizm-widget [icons]="[iconBtnTemplate]" title="Управление колонками">
  <prizm-scrollbar class="scrollable">
    <table class="table" [columns]="columns" prizmStickyRelative prizmTable>
      <thead>
        <tr prizmThGroup>
          <th
            *prizmHead="'code'"
            [prizmStickyLeft]="isStickyLeft('code')"
            [stylesOnSticky]="{ 'z-index': 22 }"
            prizmTh
          >
            Код
          </th>
          <th
            *prizmHead="'name'"
            [prizmStickyLeft]="isStickyLeft('name')"
            [stylesOnSticky]="{ 'z-index': 22 }"
            prizmTh
          >
            Наименование
          </th>
          <th *prizmHead="'category'" prizmTh>Категория</th>
          <th *prizmHead="'count'" prizmTh>Количество</th>
          <th *prizmHead="'nameTwin'" prizmTh>Наименование 2</th>
          <th
            *prizmHead="'categoryTwin'"
            [prizmStickyRight]="isStickyRight('categoryTwin')"
            [style.z-index]="22"
            prizmTh
          >
            Категория 2
          </th>
          <th
            *prizmHead="'countTwin'"
            [prizmStickyRight]="isStickyRight('countTwin')"
            [style.z-index]="22"
            prizmTh
          >
            Количество 2
          </th>
        </tr>
      </thead>

      <tbody [data]="products" prizmTbody>
        <tr class="row" *prizmRow="let item of products; let i = index" prizmTr>
          <td class="format__number" *prizmCell="'code'" [prizmStickyLeft]="isStickyLeft('code')" prizmTd>
            {{ item.code | spaceNumber : '0.0-0' }}
          </td>
          <td *prizmCell="'name'" [prizmStickyLeft]="isStickyLeft('name')" prizmTd>{{ item.name }}</td>
          <td *prizmCell="'category'" prizmTd>{{ item.category }}</td>
          <td class="format__number" *prizmCell="'count'" prizmTd>
            {{ item.count | spaceNumber : '0.0-0' }}
          </td>
          <td *prizmCell="'nameTwin'" prizmTd>{{ item.name }}</td>
          <td *prizmCell="'categoryTwin'" [prizmStickyLeft]="isStickyRight('categoryTwin')" prizmTd>
            {{ item.category }}
          </td>
          <td
            class="format__number"
            *prizmCell="'countTwin'"
            [prizmStickyLeft]="isStickyRight('countTwin')"
            prizmTd
          >
            {{ item.count | spaceNumber : '0.0-0' }}
          </td>
        </tr>
      </tbody>
    </table>
  </prizm-scrollbar>
</prizm-widget>

<ng-template #iconBtnTemplate>
  <prizm-dropdown-host [(isOpen)]="showColumnSettings" [content]="dropdown" prizmDropdownHostWidth="auto">
    <button
      [icon]="'settings'"
      (click)="toggleColumnSettings()"
      prizmIconButton
      appearanceType="ghost"
      appearance="secondary"
      size="s"
    ></button>
  </prizm-dropdown-host>
</ng-template>

<ng-template #dropdown>
  <prizm-column-settings
    [defaultSettings]="defaultSettings"
    [settings]="settings"
    [stickySettings]="true"
    (isSettingsChanged)="updateTableSettings($event)"
  ></prizm-column-settings>
</ng-template>
