<prizm-widget [icons]="[iconBtnTemplate]" title="Управление колонками">
  <prizm-scrollbar class="scrollable">
    <table class="table" [columns]="columns" prizmTable>
      <thead>
        <tr prizmThGroup>
          <th *prizmHead="'code'" prizmTh>Код</th>
          <th *prizmHead="'name'" prizmTh>Наименование</th>
          <th *prizmHead="'category'" prizmTh>Категория</th>
          <th *prizmHead="'count'" prizmTh>Количество</th>
          <th *prizmHead="'nameTwin'" prizmTh>Наименование 2</th>
          <th *prizmHead="'categoryTwin'" prizmTh>Категория 2</th>
          <th *prizmHead="'countTwin'" prizmTh>Количество 2</th>
        </tr>
      </thead>

      <tbody [data]="products" prizmTbody>
        <tr class="row" *prizmRow="let item of products; let i = index" prizmTr>
          <td class="format__number" *prizmCell="'code'" prizmTd>{{ item.code | spaceNumber : '0.0-0' }}</td>
          <td *prizmCell="'name'" prizmTd>{{ item.name }}</td>
          <td *prizmCell="'category'" prizmTd>{{ item.category }}</td>
          <td class="format__number" *prizmCell="'count'" prizmTd>
            {{ item.count | spaceNumber : '0.0-0' }}
          </td>
          <td *prizmCell="'nameTwin'" prizmTd>{{ item.name }}</td>
          <td *prizmCell="'categoryTwin'" prizmTd>{{ item.category }}</td>
          <td class="format__number" *prizmCell="'countTwin'" prizmTd>
            {{ item.count | spaceNumber : '0.0-0' }}
          </td>
        </tr>
      </tbody>
    </table>
  </prizm-scrollbar>
</prizm-widget>

<ng-template #iconBtnTemplate>
  <prizm-dropdown-host [(isOpen)]="showColumnSettings" [content]="dropdown" prizmDropdownHostWidth="auto">
    <button
      [icon]="'settings'"
      (click)="toggleColumnSettings()"
      prizmIconButton
      appearanceType="ghost"
      appearance="secondary"
      size="s"
    ></button>
  </prizm-dropdown-host>
</ng-template>

<ng-template #dropdown>
  <prizm-column-settings
    [defaultSettings]="defaultSettings"
    [settings]="settings"
    (isSettingsChanged)="updateTableSettings($event)"
    use
  ></prizm-column-settings>
</ng-template>
