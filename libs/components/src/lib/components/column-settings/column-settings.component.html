<div class="container" *prizmLet="columnSettings$ | async as translations">
  <div class="header prizm-font-title-h4">
    <div class="title">{{ translations | prizmPluck : ['title'] }}</div>
    <button
      *ngIf="defaultSettings"
      (click)="resetToDeafault()"
      prizmButton
      appearanceType="ghost"
      appearance="danger"
      size="m"
    >
      {{ translations | prizmPluck : ['resetBtn'] }}
    </button>
  </div>
  <div class="section">
    <div class="section-header">
      <div class="prizm-font-title-h4">{{ translations | prizmPluck : ['subTitle'] }}</div>
    </div>
    <div class="section-toggle">
      <prizm-toggle size="m"></prizm-toggle>
      <span class="prizm-font-main-body-14">{{ translations | prizmPluck : ['fixHeaderToggle'] }}</span>
    </div>
  </div>
  <div class="section">
    <div class="section-header">
      <div class="prizm-font-title-h4">{{ translations | prizmPluck : ['stickyLeft'] }}</div>
    </div>
    <prizm-scrollbar>
      <div
        class="column-list"
        #stickyLeftList="cdkDropList"
        [cdkDropListData]="stickyLeftColumns"
        [cdkDropListConnectedTo]="[columnList, stickyRightList]"
        (cdkDropListDropped)="drop($event)"
        cdkDropList
      >
        <ng-container *ngIf="stickyLeftColumns.length; else dropZone">
          <div class="column-box prizm-font-main-body-14" *ngFor="let column of stickyLeftColumns" cdkDrag>
            <ng-container *ngTemplateOutlet="columnItem; context: { column: column }"></ng-container>
          </div>
        </ng-container>
      </div>
    </prizm-scrollbar>
  </div>
  <div class="section">
    <div class="section-header">
      <div class="prizm-font-title-h4">{{ translations | prizmPluck : ['mainColumns'] }}</div>
      <button prizmButton appearanceType="ghost" appearance="secondary" size="m">
        {{ translations | prizmPluck : ['showAllBtn'] }}
      </button>
    </div>
    <prizm-scrollbar>
      <div
        class="column-list"
        #columnList="cdkDropList"
        [cdkDropListData]="columns"
        [cdkDropListConnectedTo]="[stickyLeftList, stickyRightList]"
        (cdkDropListDropped)="drop($event)"
        cdkDropList
      >
        <ng-container *ngIf="columns.length; else dropZone">
          <div class="column-box prizm-font-main-body-14" *ngFor="let column of columns" cdkDrag>
            <ng-container *ngTemplateOutlet="columnItem; context: { column: column }"></ng-container>
          </div>
        </ng-container>
      </div>
    </prizm-scrollbar>
  </div>
  <div class="section">
    <div class="section-header">
      <div class="prizm-font-title-h4">{{ translations | prizmPluck : ['stickyRight'] }}</div>
    </div>
    <prizm-scrollbar>
      <div
        class="column-list"
        #stickyRightList="cdkDropList"
        [cdkDropListData]="stickyRightColumns"
        [cdkDropListConnectedTo]="[columnList, stickyLeftList]"
        (cdkDropListDropped)="drop($event)"
        cdkDropList
      >
        <ng-container *ngIf="stickyRightColumns.length; else dropZone">
          <div class="column-box prizm-font-main-body-14" *ngFor="let column of stickyRightColumns" cdkDrag>
            <ng-container *ngTemplateOutlet="columnItem; context: { column: column }"></ng-container>
          </div>
        </ng-container>
      </div>
    </prizm-scrollbar>
  </div>
  <div class="footer prizm-font-btn-links-14">
    <div class="buttons">
      <button appearance="secondary" appearanceType="ghost" size="m" prizmButton>
        {{ translations | prizmPluck : ['cancelBtn'] }}
      </button>
      <button appearance="primary" size="m" prizmButton>{{ translations | prizmPluck : ['saveBtn'] }}</button>
    </div>
  </div>

  <ng-template #columnItem let-column="column">
    <prizm-icon [size]="24" iconClass="editor-dots"></prizm-icon>
    <span>{{ column.name }}</span>
    <button
      [icon]="column.status | prizmColumnIcon"
      prizmIconButton
      appearanceType="ghost"
      appearance="secondary"
      size="m"
    ></button>
  </ng-template>

  <ng-template #dropZone>
    <div class="dropzone">{{ translations | prizmPluck : ['dropzone'] }}</div>
  </ng-template>
</div>
