<div class="container">
  <div class="content">
    <span
      class="rows rows__count"
      *ngIf="!paginatorOptions?.noRowsSelector && !paginatorOptions?.noRowsSelectorLabel"
    >
      <ng-container *polymorphOutlet="textOnPage as title">
        {{ title }}
      </ng-container>
    </span>
    <div class="rows-selector" *ngIf="!paginatorOptions?.noRowsSelector">
      <prizm-select
        [disabled]="disabled"
        [forceClear]="false"
        [label]="$any(null)"
        [outer]="true"
        [nullContent]="$any(null)"
        [ngModel]="rows"
        [ngModelOptions]="{ standalone: true }"
        [items]="$any(this.rowsCountOptions?.length) > 0 ? this.rowsCountOptions : [rows]"
        (ngModelChange)="changeRows($event)"
        size="s"
      ></prizm-select>
    </div>
  </div>

  <div class="content">
    <span class="rows rows__show" *ngIf="!paginatorOptions?.noInfo" [hidden]="disabled">
      Показано строк: {{ (currentPage - 1) * rows + 1 }}-{{
        currentPage * rows > $any(totalRecords) ? totalRecords : currentPage * rows
      }}
      из {{ realTotalRecord }}
    </span>
    <div
      class="paginator paginator__finite"
      *ngIf="paginatorType === 'finite' && paginationGenerator() as pagingData"
    >
      <button
        class="control control_left"
        *ngIf="paginatorOptions.noToFirstPageBtn ?? true"
        [icon]="'chevrons-double-left'"
        [disabled]="disabled || currentPage === 1"
        (click)="toFirstPage()"
        prizmIconButton
        appearanceType="ghost"
        appearance="secondary"
        size="m"
      ></button>
      <button
        class="control control_left"
        *ngIf="!leftButtonLabel; else leftLabelBtn"
        [icon]="'arrows-chevron-left'"
        [disabled]="disabled || currentPage === 1"
        (click)="decrease()"
        prizmIconButton
        appearanceType="ghost"
        appearance="secondary"
        size="m"
      ></button>
      <ng-template #leftLabelBtn>
        <button
          class="control control_left"
          *ngIf="leftButtonLabel"
          [icon]="'arrows-chevron-left'"
          [disabled]="disabled || currentPage === 1"
          (click)="decrease()"
          prizmButton
          appearanceType="ghost"
          appearance="secondary"
          size="m"
        >
          {{ leftButtonLabel }}
        </button>
      </ng-template>

      <ng-container *ngIf="!paginatorOptions?.noPages">
        <ng-container *ngIf="pagingData.left">
          <button
            class="page"
            [disabled]="disabled"
            [class.page_disabled]="disabled"
            (click)="changePage(pagingData.left)"
            prizmButton
            appearanceType="ghost"
            appearance="secondary"
            size="m"
          >
            {{ pagingData.left }}
          </button>
          <div
            class="dots"
            *ngIf="pagingData.left + 1 !== pagingData.mid[0]"
            [class.dots_disabled]="disabled"
          >
            ...
          </div>
        </ng-container>

        <button
          class="page"
          *ngFor="let page of pagingData.mid"
          [disabled]="disabled"
          [class.page_disabled]="disabled"
          [class.page_selected]="page === currentPage"
          (click)="changePage(page)"
          prizmButton
          appearanceType="ghost"
          appearance="secondary"
          size="m"
        >
          {{ page }}
        </button>

        <ng-container *ngIf="pagingData.right">
          <div
            class="dots"
            *ngIf="pagingData.right - 1 !== pagingData.mid[pagingData.mid.length - 1]"
            [class.dots_disabled]="disabled"
          >
            ...
          </div>
          <button
            class="page"
            [disabled]="disabled"
            (click)="changePage(pagingData.right)"
            prizmButton
            appearanceType="ghost"
            appearance="secondary"
            size="m"
          >
            {{ pagingData.right }}
          </button>
        </ng-container>
      </ng-container>

      <button
        class="control control_right"
        *ngIf="!rightButtonLabel; else rightLabelBtn"
        [icon]="'arrows-chevron-right'"
        [disabled]="disabled || (currentPage === pagesCount ?? currentPage === 0)"
        (click)="increase()"
        prizmIconButton
        appearanceType="ghost"
        appearance="secondary"
        size="m"
      ></button>
      <ng-template #rightLabelBtn>
        <button
          class="control_right"
          [iconRight]="'arrows-chevron-right'"
          [disabled]="disabled || (currentPage === pagesCount ?? currentPage === 0)"
          (click)="increase()"
          prizmButton
          appearanceType="ghost"
          appearance="secondary"
          size="m"
        >
          {{ rightButtonLabel }}
        </button>
      </ng-template>

      <button
        class="control control_right"
        *ngIf="paginatorOptions.noToLastPageBtn ?? true"
        [icon]="'chevrons-double-right'"
        [disabled]="disabled || (currentPage === pagesCount ?? currentPage === 0)"
        (click)="toLastPage()"
        prizmIconButton
        appearanceType="ghost"
        appearance="secondary"
        size="m"
      ></button>
    </div>

    <div class="paginator paginator__infinite" *ngIf="paginatorType === 'infinite'">
      <button
        class="show-more"
        [disabled]="disabled || showMoreDisabled"
        [class.show-more_disabled]="disabled || showMoreDisabled"
        (click)="increase()"
      >
        {{ moreButtonLabel }}
      </button>
    </div>
  </div>
</div>
