<div
  class="hierarchical-menu-item"
  [attr.active]="activeNodeId === item.id"
  [attr.folder]="options.checkFolder(item)"
  [attr.hasChildren]="options.checkHasChildren(item)"
  [attr.root]="item.hierarchy.levelNested === 0"
  [attr.disabled]="options.checkDisable(item)"
>
  <div
    *ngIf="closed"
    [zyfraTooltip]="itemName"
    [zyfraTooltipDelay]="options.tooltipDelay"
    class="hierarchical-menu-item__content hierarchical-menu-item__content_collapsed"
  >
    <div class="hierarchical-menu-item__icon hierarchical-menu-item__icon_main">
      <span *ngIf="item.attributes?.icon" class="zyfra-icon" [ngClass]="item.attributes?.icon"></span>
    </div>
  </div>

  <div
    *ngIf="!closed"
    [style.padding-left]="nestedShift"
    class="hierarchical-menu-item__content hierarchical-menu-item__content_expanded"
  >
    <ng-container *ngIf="itemContentTemplate; else defaultItemContent">
      <ng-container *ngTemplateOutlet="itemContentTemplate; context: { $implicit: item }"></ng-container>
    </ng-container>

    <ng-template #defaultItemContent>
      <div class="hierarchical-menu-item__icon hierarchical-menu-item__icon_main">
        <span *ngIf="item.attributes?.icon" class="zyfra-icon" [ngClass]="item.attributes?.icon"></span>
      </div>

      <div
        #label
        [zyfraTooltip]="itemName"
        zyfraTooltipPosition="below"
        [zyfraTooltipOverflowText]="label"
        [zyfraTooltipDelay]="options.tooltipDelay"
        class="hierarchical-menu-item__label"
      >
        {{ itemName }}
      </div>
    </ng-template>

    <div class="hierarchical-menu-item__suffix" (click)="$event.stopPropagation()">
      <div
        *ngIf="optionsItemTemplate"
        (click)="optionsOpen = !optionsOpen"
        class="hierarchical-menu-item__icon hierarchical-menu-item__icon_add hierarchical-menu-item__icon_open-options"
        [class.hierarchical-menu-item__icon_active]="optionsOpen"
      >
        <span class="zyfra-icon settings-more-vert"></span>
      </div>

      <ng-container *ngTemplateOutlet="suffixItemTemplate; context: { $implicit: item }"></ng-container>
      <ng-content></ng-content>
    </div>
  </div>

  <div *ngIf="optionsOpen" class="hierarchical-menu-item__options">
    <ng-container *ngTemplateOutlet="optionsItemTemplate; context: { $implicit: item }"></ng-container>
  </div>
</div>
