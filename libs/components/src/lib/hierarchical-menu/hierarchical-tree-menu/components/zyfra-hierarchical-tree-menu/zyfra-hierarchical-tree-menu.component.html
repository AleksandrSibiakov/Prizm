<div #hierarchicalMenu class="hierarchical-menu" [attr.collapsed]="collapsed" [attr.expanded]="!collapsed">
  <zyfra-hierarchical-tree-menu-list
    *ngIf="mainTree && mainTree.length > 0"
    class="hierarchical-main-menu"
    [attr.type]="'main'"
    [attr.theme]="'main'"
    [menuType]="'main'"
    [tree]="mainTree"
    [activeNodeId]="subMenuRootId ?? mainMenuSelectedNodeId"
    [closed]="collapsed"
    (selectNode)="selectNodeHandler($event, 'main')"
    (nodeExpand)="expandHandler($event)"
    (nodeCollapse)="collapseHandler($event)"
    [suffixItemTemplate]="suffixItemTemplate"
    [optionsItemTemplate]="optionsItemTemplate"
    [itemContentTemplate]="itemContentTemplate"
  ></zyfra-hierarchical-tree-menu-list>

  <zyfra-hierarchical-tree-menu-list
    *ngIf="subTree && subTree.length > 0"
    class="hierarchical-sub-menu"
    [attr.type]="'sub'"
    [attr.theme]="'sub'"
    [menuType]="'sub'"
    [tree]="subTree"
    [activeNodeId]="elementIdHighlightedInSubMenu"
    [closed]="collapsed"
    (selectNode)="selectNodeHandler($event, 'sub')"
    (nodeExpand)="expandHandler($event)"
    (nodeCollapse)="collapseHandler($event)"
    [suffixItemTemplate]="suffixItemTemplate"
    [optionsItemTemplate]="optionsItemTemplate"
    [itemContentTemplate]="itemContentTemplate"
  ></zyfra-hierarchical-tree-menu-list>
</div>

<ng-template #menuRef>
  <zyfra-hierarchical-tree-menu-list
    #popoverMenuListRef
    [attr.type]="'popover'"
    [menuType]="popoverMenu.mode"
    [tree]="popoverMenu.data"
    (selectNode)="selectNodeHandlerPopoverMenu($event)"
    (nodeExpand)="expandHandler($event)"
    (nodeCollapse)="collapseHandler($event)"
    [suffixItemTemplate]="suffixItemTemplate"
    [optionsItemTemplate]="optionsItemTemplate"
    [activeNodeId]="elementIdHighlightedInPopoverMenu"
    [itemContentTemplate]="itemContentTemplate"
  ></zyfra-hierarchical-tree-menu-list>
</ng-template>
