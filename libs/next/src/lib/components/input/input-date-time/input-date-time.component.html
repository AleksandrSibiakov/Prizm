[[ openTimeTemplate : {{openTimeTemplate}}]
[[ open : {{open}}]
<zui-dropdown-host
    [style.--zui-dropdown-host-width]='"100%"'
    class="z-hosted"
    [canOpen]="interactive"
    [content]="openTimeTemplate ? dropdownTimeTemplate : dropdownDateTemplate"
    zuiDropdownHostWidth='auto'
    [isOpen]="interactive && (openTimeTemplate || open)"
    [closeByEsc]='true'
    (isOpenChange)="onOpenChange($event)"
>
    <zui-input-layout
      [label]="label"
      [outer]='outer'
      [size]="size">
      <ng-template zuiInputStatusText>Ошибка! Неправильный формат</ng-template>
      <input
        class='input-search'
        zuiInput
        #focusableElementRef
        [mask]="textMaskOptions"
        [showMaskTyped]='focusableElementRef.focused'
        [dropSpecialCharacters]="false"
        [readonly]='readOnly'
        [placeholder]='placeholder'
        [disabled]='computedDisabled'
        [ngModel]="stringValue"
        (ngModelChange)='onValueChange($event || "")'
      />
      <ng-container zui-input-right>
        <button
          zuiInputIconButton="date-calendar-blank"
          [interactive]="true"
          (click)='focusableElementRef.focus()'></button>
        <button
          zuiInputIconButton="date-clock"
          (click)='openTimeDropdown();'
          [interactive]="true"
        ></button>
        <ng-container *ngFor='let button of rightButtons$ | async' [ngTemplateOutlet]='button.template'>
        </ng-container>
      </ng-container>
    </zui-input-layout>
</zui-dropdown-host>

<ng-template #dropdownDateTemplate>
  <zui-calendar
    zuiPreventDefault="mousedown"
    automation-id="zui-input-date-time__calendar"
    [min]="calendarMinDay"
    [max]="calendarMaxDay"
    [disabledItemHandler]="disabledItemHandler"
    [month]="computedActiveYearMonth"
    [value]="calendarValue"
    (dayClick)="onDayClick($event)"
    (monthChange)="onMonthChange($event)"
  ></zui-calendar>
</ng-template>

<ng-template #dropdownTimeTemplate>
  <zui-data-list
    zuiLifecycle
    (zuiOnDestroy)='openTimeTemplate = false'
    *ngIf='timeItems.length;' class='block' [style.--zui-data-list-border]='0'>
    <ng-container>
      <div class='time-item'
           *ngFor='let item of timeItems; let idx = index'
           (click)='$event.stopPropagation(); onTimeMenuClick(item, $event)'>
            <span class='text'>
              {{ item }}
            </span>
      </div>
    </ng-container>
  </zui-data-list>
</ng-template>
