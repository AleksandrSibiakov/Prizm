<zui-dropdown-host
    class="z-wrapper"
    [canOpen]="interactive && !!filtered.length"
    [content]="dropdownContent"
    [isOpen]="interactive && open && !!filtered.length"
    (isOpenChange)="onOpen($event)"
    [closeByEsc]='true'
>
    <zui-input-layout
      [label]="label"
      [outer]='outer'
      (click)='safeOpenModal()'
      [size]="size">
      <input
        class='input-search'
        zuiInput
        #focusableElementRef
        [mask]="textMaskOptions"
        [showMaskTyped]='focusableElementRef.focused'
        [dropSpecialCharacters]="false"
        [required]='readOnly'
        [placeholder]='placeholder'
        [disabled]='disabled'
        [ngModel]="stringValue"
        (ngModelChange)='onValueChange($event || "")'
        (keydown.arrowUp)="onArrowUp($event)"
        (keydown.arrowDown)="onArrowDown($event)"
      />
      <ng-container zui-input-right>
        <button
          zuiInputIconButton="date-clock"
          (click)='focusableElementRef.focus()'
          [interactive]="true"
        ></button>
        <ng-container *ngFor='let button of rightButtons$ | async' [ngTemplateOutlet]='button.template'>
        </ng-container>
      </ng-container>
    </zui-input-layout>
</zui-dropdown-host>

<ng-template #dropdownContent>
    <zui-data-list class='block' [style.--zui-data-list-border]='0'>
      <ng-container *ngIf='items?.length;'>
        <div class='item'
             *ngFor='let item of filtered; let idx = index'
             (click)='onMenuClick(item)'>
            <span class='text'>
              {{ item }}
            </span>
        </div>
      </ng-container>
    </zui-data-list>
</ng-template>
